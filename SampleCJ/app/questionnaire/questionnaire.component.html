<mat-accordion class="accordion">
    <ng-container *ngFor="let sections of questionnaireData; let first=first; let last=last; let index=index;">
        <mat-expansion-panel #panel [expanded]="step === index" (opened)="setStep(index)" hideToggle>
            <mat-expansion-panel-header class="panel-header">
                <mat-panel-title>
                    <mat-icon>{{!panel.expanded?'add':'remove'}}</mat-icon>
                    {{sections.label}}
                </mat-panel-title>
                <!-- <mat-panel-description>
                    <mat-icon>{{!panel.expanded?'add':'remove'}}</mat-icon>
                    {{sections.label}}
                </mat-panel-description> -->
                <!-- <mat-panel-description>
                    Type your name and age
                    <mat-icon>account_circle</mat-icon>
                </mat-panel-description> -->
            </mat-expansion-panel-header>
            <div [formGroup]="questionnaireForm?.controls[sections.name]" class="questions-form">
                <ng-container *ngFor="let element of sections.elements; let first=first; let last=last;">
                    <mat-divider *ngIf="!first"></mat-divider>
                    <div class="flex-row questions">
                        <div class="question"><span *ngIf="element.required" class="mandatory">*</span>{{element.label}}
                        </div>
                        <app-dynamic-elements-form [element]="element"
                            [elementControl]="questionnaireForm?.controls[sections.name]?.controls[element.name]">
                        </app-dynamic-elements-form>
                    </div>

                </ng-container>
            </div>
            <mat-action-row class="action-row">
                <button mat-button color="warn" *ngIf="!first" (click)="prevStep()">Previous</button>
                <button mat-button color="primary" *ngIf="!last" (click)="nextStep()">Next</button>
            </mat-action-row>
        </mat-expansion-panel>
    </ng-container>
</mat-accordion>